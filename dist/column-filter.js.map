{"version":3,"sources":["../src/column-filter.js"],"names":["ColumnFilter","attrs","schema","_field","field","_value","value","_schema","reset","resetIfEmpty","isEmptySet","clearValues","ensureValue","containsValue","push","toggleValue","_","without","indexOf","toJSON","hasFilter","toHumanDescription","column","name","join","isNull","length","columnForFieldKey","columnName"],"mappings":";;;;;AAAA;;;;;;;;IAEqBA,Y;;;AACnB,wBAAYC,KAAZ,EAAmBC,MAAnB,EAA2B;AACzB,SAAKC,MAAL,GAAcF,KAAK,CAACG,KAApB;AACA,SAAKC,MAAL,GAAcJ,KAAK,CAACK,KAAN,IAAe,IAA7B;AACA,SAAKC,OAAL,GAAeL,MAAf;AACD;;;;SAuCDM,K,GAAA,iBAAQ;AACN,SAAKH,MAAL,GAAc,IAAd;AACD,G;;SAEDI,Y,GAAA,wBAAe;AACb,QAAI,KAAKC,UAAT,EAAqB;AACnB,WAAKF,KAAL;AACD;AACF,G;;SAEDG,W,GAAA,uBAAc;AACZ,SAAKN,MAAL,GAAc,EAAd;AACD,G;;SAEDO,W,GAAA,qBAAYN,KAAZ,EAAmB;AACjB,QAAI,CAAC,KAAKD,MAAV,EAAkB;AAChB,WAAKA,MAAL,GAAc,EAAd;AACD;;AAED,QAAI,CAAC,KAAKQ,aAAL,CAAmBP,KAAnB,CAAL,EAAgC;AAC9B,WAAKD,MAAL,CAAYS,IAAZ,CAAiBR,KAAjB;AACD;AACF,G;;SAEDS,W,GAAA,qBAAYT,KAAZ,EAAmB;AACjB,QAAI,CAAC,KAAKD,MAAV,EAAkB;AAChB,WAAKA,MAAL,GAAc,EAAd;AACD;;AAED,QAAI,KAAKQ,aAAL,CAAmBP,KAAnB,CAAJ,EAA+B;AAC7B,WAAKD,MAAL,GAAcW,mBAAEC,OAAF,CAAU,KAAKX,KAAf,EAAsBA,KAAtB,CAAd;AACD,KAFD,MAEO;AACL,WAAKD,MAAL,CAAYS,IAAZ,CAAiBR,KAAjB;AACD;AACF,G;;SAEDO,a,GAAA,uBAAcP,KAAd,EAAqB;AACnB,QAAI,KAAKA,KAAL,IAAc,IAAlB,EAAwB;AACtB,aAAO,KAAP;AACD;;AAED,WAAO,KAAKA,KAAL,CAAWY,OAAX,CAAmBZ,KAAnB,IAA4B,CAAC,CAApC;AACD,G;;SAEDa,M,GAAA,kBAAS;AACP,QAAI,CAAC,KAAKC,SAAV,EAAqB;AACnB,aAAO,IAAP;AACD;;AAED,WAAO;AACLhB,MAAAA,KAAK,EAAE,KAAKD,MADP;AAELG,MAAAA,KAAK,EAAE,KAAKD;AAFP,KAAP;AAID,G;;SAEDgB,kB,GAAA,8BAAqB;AACnB,QAAI,CAAC,KAAKD,SAAV,EAAqB;AACnB,aAAO,IAAP;AACD;;AAED,WAAO,CACL,KAAKE,MAAL,GAAc,KAAKA,MAAL,CAAYC,IAA1B,GAAiC,KAAKnB,KADjC,EAEL,QAFK,EAGL,MAAM,KAAKE,KAAL,CAAWkB,IAAX,CAAgB,IAAhB,CAAN,GAA8B,GAHzB,EAILA,IAJK,CAIA,GAJA,CAAP;AAKD,G;;;;wBAtGW;AACV,aAAO,KAAKnB,MAAZ;AACD,K,CAED;;;;wBACa;AACX,aAAO,KAAKC,KAAL,IAAc,IAArB;AACD;;;wBAEe;AACd,aAAO,CAAC,KAAKmB,MAAb;AACD;;;wBAEe;AACd,aAAO,KAAKnB,KAAL,IAAc,IAAd,IAAsB,KAAKA,KAAL,CAAWoB,MAAX,GAAoB,CAAjD;AACD,K,CAED;;;;wBACiB;AACf,aAAO,KAAKpB,KAAL,IAAc,IAAd,IAAsB,KAAKA,KAAL,CAAWoB,MAAX,KAAsB,CAAnD;AACD;;;wBAEW;AACV,aAAO,KAAKvB,MAAZ;AACD;;;wBAEY;AACX,aAAO,KAAKI,OAAL,CAAaoB,iBAAb,CAA+B,KAAKvB,KAApC,CAAP;AACD;;;wBAEgB;AACf,UAAI,KAAKkB,MAAT,EAAiB;AACf,eAAO,KAAKA,MAAL,CAAYM,UAAnB;AACD;;AACD,aAAO,IAAP;AACD","sourcesContent":["import _ from 'lodash';\n\nexport default class ColumnFilter {\n  constructor(attrs, schema) {\n    this._field = attrs.field;\n    this._value = attrs.value || null;\n    this._schema = schema;\n  }\n\n  get value() {\n    return this._value;\n  }\n\n  // when the filter is fully blank (default state) all rows are returned\n  get isNull() {\n    return this.value == null;\n  }\n\n  get hasFilter() {\n    return !this.isNull;\n  }\n\n  get hasValues() {\n    return this.value != null && this.value.length > 0;\n  }\n\n  // when the set is empty, it should always return no results\n  get isEmptySet() {\n    return this.value != null && this.value.length === 0;\n  }\n\n  get field() {\n    return this._field;\n  }\n\n  get column() {\n    return this._schema.columnForFieldKey(this.field);\n  }\n\n  get columnName() {\n    if (this.column) {\n      return this.column.columnName;\n    }\n    return null;\n  }\n\n  reset() {\n    this._value = null;\n  }\n\n  resetIfEmpty() {\n    if (this.isEmptySet) {\n      this.reset();\n    }\n  }\n\n  clearValues() {\n    this._value = [];\n  }\n\n  ensureValue(value) {\n    if (!this._value) {\n      this._value = [];\n    }\n\n    if (!this.containsValue(value)) {\n      this._value.push(value);\n    }\n  }\n\n  toggleValue(value) {\n    if (!this._value) {\n      this._value = [];\n    }\n\n    if (this.containsValue(value)) {\n      this._value = _.without(this.value, value);\n    } else {\n      this._value.push(value);\n    }\n  }\n\n  containsValue(value) {\n    if (this.value == null) {\n      return false;\n    }\n\n    return this.value.indexOf(value) > -1;\n  }\n\n  toJSON() {\n    if (!this.hasFilter) {\n      return null;\n    }\n\n    return {\n      field: this._field,\n      value: this._value\n    };\n  }\n\n  toHumanDescription() {\n    if (!this.hasFilter) {\n      return null;\n    }\n\n    return [\n      this.column ? this.column.name : this.field,\n      'one of',\n      '[' + this.value.join(', ') + ']'\n    ].join(' ');\n  }\n}\n"],"file":"column-filter.js"}