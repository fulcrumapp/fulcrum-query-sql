{"version":3,"file":"column-settings-item.js","sourceRoot":"","sources":["../src/column-settings-item.js"],"names":[],"mappings":"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","sourcesContent":["import { Expression } from './expression';\nimport { OperatorType } from './operator';\nimport ColumnFilter from './column-filter';\nimport ColumnSummary from './column-summary';\n\nexport default class ColumnSettingsItem {\n  constructor(attrs, schema) {\n    this._schema = schema;\n    this._hidden = !!attrs.hidden;\n    this._column = attrs.column;\n    this._search = attrs.search || '';\n    this._filter = new ColumnFilter({...attrs.filter, field: attrs.column.id}, this._schema);\n    this._expression = new Expression({...attrs.expression, field: attrs.column.id}, schema);\n    this._range = new Expression({...attrs.range,\n                                  operator: attrs.column.isDate ? OperatorType.DateBetween.name\n                                                                : OperatorType.Between.name,\n                                  field: attrs.column.id}, schema);\n    this._summary = new ColumnSummary({...attrs.summary, field: attrs.column.id}, this._schema);\n  }\n\n  clear() {\n    this._search = '';\n    this._filter = new ColumnFilter({field: this.column.id}, this._schema);\n    this._expression = new Expression({field: this.column.id}, this._schema);\n    this._range = new Expression({operator: this.column.isDate ? OperatorType.DateBetween.name\n                                                               : OperatorType.Between.name,\n                                  field: this.column.id}, this._schema);\n  }\n\n  toJSON() {\n    const json = {\n      hidden: this.isHidden,\n      column: this.column.toJSON()\n    };\n\n    if (this.search) {\n      json.search = this.search;\n    }\n\n    if (this.filter.hasFilter) {\n      json.filter = this.filter.toJSON();\n    }\n\n    if (this.expression.isValid) {\n      json.expression = this.expression.toJSON();\n    }\n\n    if (this.range.isValid) {\n      json.range = this.range.toJSON();\n    }\n\n    return json;\n  }\n\n  get hasFilter() {\n    return (\n      this._search || this._filter.hasFilter || this._expression.isValid || this._range.isValid\n    );\n  }\n\n  get search() {\n    return this._search;\n  }\n\n  set search(search) {\n    this._search = search || '';\n  }\n\n  get column() {\n    return this._column;\n  }\n\n  get filter() {\n    return this._filter;\n  }\n\n  get summary() {\n    return this._summary;\n  }\n\n  get isVisible() {\n    return !this._hidden;\n  }\n\n  get isHidden() {\n    return this._hidden;\n  }\n\n  set hidden(hidden) {\n    this._hidden = !!hidden;\n  }\n\n  get expression() {\n    return this._expression;\n  }\n\n  get range() {\n    return this._range;\n  }\n}\n"]}