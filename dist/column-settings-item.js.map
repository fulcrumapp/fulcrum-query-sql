{"version":3,"file":"column-settings-item.js","names":["ColumnSettingsItem","attrs","schema","_schema","_hidden","hidden","_column","column","_search","search","_filter","ColumnFilter","filter","field","id","_expression","Expression","expression","_range","range","operator","isDate","OperatorType","DateBetween","name","Between","_summary","ColumnSummary","summary","clear","toJSON","json","isHidden","hasFilter","isValid"],"sources":["../src/column-settings-item.js"],"sourcesContent":["import { Expression } from './expression';\nimport { OperatorType } from './operator';\nimport ColumnFilter from './column-filter';\nimport ColumnSummary from './column-summary';\n\nexport default class ColumnSettingsItem {\n  constructor(attrs, schema) {\n    this._schema = schema;\n    this._hidden = !!attrs.hidden;\n    this._column = attrs.column;\n    this._search = attrs.search || '';\n    this._filter = new ColumnFilter({...attrs.filter, field: attrs.column.id}, this._schema);\n    this._expression = new Expression({...attrs.expression, field: attrs.column.id}, schema);\n    this._range = new Expression({...attrs.range,\n                                  operator: attrs.column.isDate ? OperatorType.DateBetween.name\n                                                                : OperatorType.Between.name,\n                                  field: attrs.column.id}, schema);\n    this._summary = new ColumnSummary({...attrs.summary, field: attrs.column.id}, this._schema);\n  }\n\n  clear() {\n    this._search = '';\n    this._filter = new ColumnFilter({field: this.column.id}, this._schema);\n    this._expression = new Expression({field: this.column.id}, this._schema);\n    this._range = new Expression({operator: this.column.isDate ? OperatorType.DateBetween.name\n                                                               : OperatorType.Between.name,\n                                  field: this.column.id}, this._schema);\n  }\n\n  toJSON() {\n    const json = {\n      hidden: this.isHidden,\n      column: this.column.toJSON()\n    };\n\n    if (this.search) {\n      json.search = this.search;\n    }\n\n    if (this.filter.hasFilter) {\n      json.filter = this.filter.toJSON();\n    }\n\n    if (this.expression.isValid) {\n      json.expression = this.expression.toJSON();\n    }\n\n    if (this.range.isValid) {\n      json.range = this.range.toJSON();\n    }\n\n    return json;\n  }\n\n  get hasFilter() {\n    return (\n      this._search || this._filter.hasFilter || this._expression.isValid || this._range.isValid\n    );\n  }\n\n  get search() {\n    return this._search;\n  }\n\n  set search(search) {\n    this._search = search || '';\n  }\n\n  get column() {\n    return this._column;\n  }\n\n  get filter() {\n    return this._filter;\n  }\n\n  get summary() {\n    return this._summary;\n  }\n\n  get isVisible() {\n    return !this._hidden;\n  }\n\n  get isHidden() {\n    return this._hidden;\n  }\n\n  set hidden(hidden) {\n    this._hidden = !!hidden;\n  }\n\n  get expression() {\n    return this._expression;\n  }\n\n  get range() {\n    return this._range;\n  }\n}\n"],"mappings":"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"}