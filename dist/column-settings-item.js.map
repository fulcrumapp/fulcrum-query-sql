{"version":3,"sources":["../src/column-settings-item.js"],"names":["ColumnSettingsItem","attrs","schema","_schema","_hidden","hidden","_column","column","_search","search","_filter","ColumnFilter","filter","field","id","_expression","Expression","expression","_range","range","operator","isDate","OperatorType","DateBetween","name","Between","_summary","ColumnSummary","summary","clear","toJSON","json","isHidden","hasFilter","isValid"],"mappings":"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","sourcesContent":["import { Expression } from './expression';\nimport { OperatorType } from './operator';\nimport ColumnFilter from './column-filter';\nimport ColumnSummary from './column-summary';\n\nexport default class ColumnSettingsItem {\n  constructor(attrs, schema) {\n    this._schema = schema;\n    this._hidden = !!attrs.hidden;\n    this._column = attrs.column;\n    this._search = attrs.search || '';\n    this._filter = new ColumnFilter({...attrs.filter, field: attrs.column.id}, this._schema);\n    this._expression = new Expression({...attrs.expression, field: attrs.column.id}, schema);\n    this._range = new Expression({...attrs.range,\n                                  operator: attrs.column.isDate ? OperatorType.DateBetween.name\n                                                                : OperatorType.Between.name,\n                                  field: attrs.column.id}, schema);\n    this._summary = new ColumnSummary({...attrs.summary, field: attrs.column.id}, this._schema);\n  }\n\n  clear() {\n    this._search = '';\n    this._filter = new ColumnFilter({field: this.column.id}, this._schema);\n    this._expression = new Expression({field: this.column.id}, this._schema);\n    this._range = new Expression({operator: this.column.isDate ? OperatorType.DateBetween.name\n                                                               : OperatorType.Between.name,\n                                  field: this.column.id}, this._schema);\n  }\n\n  toJSON() {\n    const json = {\n      hidden: this.isHidden,\n      column: this.column.toJSON()\n    };\n\n    if (this.search) {\n      json.search = this.search;\n    }\n\n    if (this.filter.hasFilter) {\n      json.filter = this.filter.toJSON();\n    }\n\n    if (this.expression.isValid) {\n      json.expression = this.expression.toJSON();\n    }\n\n    if (this.range.isValid) {\n      json.range = this.range.toJSON();\n    }\n\n    return json;\n  }\n\n  get hasFilter() {\n    return (\n      this._search || this._filter.hasFilter || this._expression.isValid || this._range.isValid\n    );\n  }\n\n  get search() {\n    return this._search;\n  }\n\n  set search(search) {\n    this._search = search || '';\n  }\n\n  get column() {\n    return this._column;\n  }\n\n  get filter() {\n    return this._filter;\n  }\n\n  get summary() {\n    return this._summary;\n  }\n\n  get isVisible() {\n    return !this._hidden;\n  }\n\n  get isHidden() {\n    return this._hidden;\n  }\n\n  set hidden(hidden) {\n    this._hidden = !!hidden;\n  }\n\n  get expression() {\n    return this._expression;\n  }\n\n  get range() {\n    return this._range;\n  }\n}\n"],"file":"column-settings-item.js"}