{"version":3,"file":"column-settings.js","names":["ColumnSettings","schema","settings","_schema","_columns","_columnsByID","_allColumns","newColumns","existingSettingsByID","setting","column","id","columns","slice","index","length","existingAttributes","item","ColumnSettingsItem","hidden","push","newColumn","splice","reset","map","o","clear","toJSON","move","from","to","arrayMove","byColumn","enabledColumnSettings","c","filter","isVisible"],"sources":["../src/column-settings.js"],"sourcesContent":["import arrayMove from 'array-move';\nimport ColumnSettingsItem from './column-settings-item';\n\nexport default class ColumnSettings {\n  constructor(schema, settings) {\n    this._schema = schema;\n\n    this._columns = [];\n    this._columnsByID = {};\n\n    this._allColumns = [];\n\n    const newColumns = [];\n\n    const existingSettingsByID = {};\n\n    if (settings) {\n      for (const setting of settings) {\n        existingSettingsByID[setting.column.id] = setting;\n      }\n    }\n\n    const columns = schema.columns.slice();\n\n    for (let index = 0; index < columns.length; ++index) {\n      const column = columns[index];\n\n      const existingAttributes = existingSettingsByID[column.id];\n\n      const item = new ColumnSettingsItem({...existingAttributes, column}, this._schema);\n\n      if (existingAttributes == null) {\n        item.hidden = true;\n        newColumns.push({column: item, index});\n      }\n\n      this._allColumns.push(item);\n      this._columnsByID[column.id] = item;\n    }\n\n    if (settings) {\n      for (const setting of settings) {\n        const item = this._columnsByID[setting.column.id];\n\n        if (item) {\n          this._columns.push(item);\n        }\n      }\n    }\n\n    for (const newColumn of newColumns) {\n      this._columns.splice(newColumn.index, 0, newColumn.column);\n    }\n  }\n\n  reset() {\n    this._columns = this._allColumns.slice();\n    this._columns.map(o => o.clear());\n  }\n\n  toJSON() {\n    return this.columns.map(o => o.toJSON());\n  }\n\n  move(from, to) {\n    this._columns = arrayMove(this._columns, from, to);\n  }\n\n  get enabledColumns() {\n    return this.enabledColumnSettings.map(c => c.column);\n  }\n\n  get enabledColumnSettings() {\n    return this.columns.filter(c => c.isVisible);\n  }\n\n  get columns() {\n    return this._columns;\n  }\n\n  get columnsByID() {\n    return this._columnsByID;\n  }\n\n  byColumn(column) {\n    return this._columnsByID[column.id];\n  }\n}\n"],"mappings":"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"}