{"version":3,"sources":["../src/column-settings.js"],"names":["ColumnSettings","schema","settings","_schema","_columns","_columnsByID","_allColumns","newColumns","existingSettingsByID","setting","column","id","columns","slice","index","length","existingAttributes","item","push","newColumn","splice","reset","map","o","clear","toJSON","move","from","to","byColumn","enabledColumnSettings","c","filter","isVisible"],"mappings":"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","file":"column-settings.js","sourcesContent":["import arrayMove from 'array-move';\nimport ColumnSettingsItem from './column-settings-item';\n\nexport default class ColumnSettings {\n  constructor(schema, settings) {\n    this._schema = schema;\n\n    this._columns = [];\n    this._columnsByID = {};\n\n    this._allColumns = [];\n\n    const newColumns = [];\n\n    const existingSettingsByID = {};\n\n    if (settings) {\n      for (const setting of settings) {\n        existingSettingsByID[setting.column.id] = setting;\n      }\n    }\n\n    const columns = schema.columns.slice();\n\n    for (let index = 0; index < columns.length; ++index) {\n      const column = columns[index];\n\n      const existingAttributes = existingSettingsByID[column.id];\n\n      const item = new ColumnSettingsItem({...existingAttributes, column}, this._schema);\n\n      if (existingAttributes == null) {\n        newColumns.push({column: item, index});\n      }\n\n      this._allColumns.push(item);\n      this._columnsByID[column.id] = item;\n    }\n\n    if (settings) {\n      for (const setting of settings) {\n        const item = this._columnsByID[setting.column.id];\n\n        if (item) {\n          this._columns.push(item);\n        }\n      }\n    }\n\n    for (const newColumn of newColumns) {\n      this._columns.splice(newColumn.index, 0, newColumn.column);\n    }\n  }\n\n  reset() {\n    this._columns = this._allColumns.slice();\n    this._columns.map(o => o.clear());\n  }\n\n  toJSON() {\n    return this.columns.map(o => o.toJSON());\n  }\n\n  move(from, to) {\n    this._columns = arrayMove(this._columns, from, to);\n  }\n\n  get enabledColumns() {\n    return this.enabledColumnSettings.map(c => c.column);\n  }\n\n  get enabledColumnSettings() {\n    return this.columns.filter(c => c.isVisible);\n  }\n\n  get columns() {\n    return this._columns;\n  }\n\n  get columnsByID() {\n    return this._columnsByID;\n  }\n\n  byColumn(column) {\n    return this._columnsByID[column.id];\n  }\n}\n"]}